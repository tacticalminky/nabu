<% skin myskin %>
<% view read uses content::Read extends master %>

<% template page_content() %>
    <div id="pages" class="pages"></div>

    <script>
        async function myFetch(data) {
            try {
                let response = await fetch('/rpc', {
                    method: 'POST',
                    body: JSON.stringify(data)
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                console.log(data.method + ": Success");
            } catch(e) {
                console.log(data.method + ": " + e.message);
            }
        }

        myFetch({ jsonrpc: "2.0", method: "test", "params": [ 21 ], "id": 1 });
        myFetch({ jsonrpc: "2.0", method: "shouldFail", "params": [ 24 ], "id": 2 });
    </script>
<% end template %>

<% end view %>
<% end skin %>